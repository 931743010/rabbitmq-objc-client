@interface <%= class_name %> ()
<%- fields.each do |f| -%>
@property (nonnull, copy, nonatomic, readwrite) <%= f[:type] %> *<%= f[:name] %>;
<%- end -%>
@end

@implementation <%= class_name %>
@synthesize frameArguments;

+ (NSNumber *)classID { return @(<%= class_id %>); }
+ (NSNumber *)methodID { return @(<%= method_id %>); }
+ (NSArray *)frames {
    return @[@[<%= fields.map {|f| "[#{f[:type]} class]"}.join(",\n               ") -%>]];
}

<%- if constructor -%>
<%= constructor %> {
    self = [super init];
    if (self) {
        <%- fields.each do |f| -%>
        self.<%= f[:name] %> = <%= f[:name] %>;
        <%- end -%>
        self.frameArguments = @[<%= fields.map {|f| "self.#{f[:name]}" }.join(",\n                                ") -%>];
    }
    return self;
}
<%- end -%>

- (instancetype)initWithDecodedFrames:(NSArray *)frames {
    self = [super init];
    if (self) {
      <%- fields.each_with_index do |f, idx| -%>
        self.<%= f[:name] %> = frames[0][<%= idx %>];
      <%- end -%>
        self.frameArguments = @[<%= fields.map {|f| "self.#{f[:name]}" }.join(",\n                                ") -%>];
    }
    return self;
}

@end

